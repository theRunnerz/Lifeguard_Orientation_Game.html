<!DOCTYPE html><html>
<head>
  <title>Lifeguard Orientation Game</title>
  <style>
    canvas {
      border: 2px solid black;
      display: block;
      margin: auto;
      background: #cceeff;
    }
    #dialogueBox {
      width: 512px;
      margin: 10px auto;
      padding: 10px;
      border: 2px solid black;
      background: white;
      font-family: Arial, sans-serif;
      display: none;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="512" height="512"></canvas>
  <div id="dialogueBox"></div>  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const tileSize = 32;
    const mapRows = 16;
    const mapCols = 16;

    // Simple map (0 = floor, 1 = wall)
    const map = [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];

    const player = { x: 2, y: 2, color: 'red' };
    const npc = { x: 14, y: 1, color: 'blue' }; // Level 1 NPC

    const dialogueBox = document.getElementById('dialogueBox');

    function drawMap() {
      for (let row = 0; row < mapRows; row++) {
        for (let col = 0; col < mapCols; col++) {
          if (map[row][col] === 1) {
            ctx.fillStyle = 'darkgreen'; // wall
          } else {
            ctx.fillStyle = '#cceeff'; // floor
          }
          ctx.fillRect(col * tileSize, row * tileSize, tileSize, tileSize);
        }
      }
    }

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x * tileSize, player.y * tileSize, tileSize, tileSize);
    }

    function drawNPC() {
      ctx.fillStyle = npc.color;
      ctx.fillRect(npc.x * tileSize, npc.y * tileSize, tileSize, tileSize);
    }

    function canMove(x, y) {
      return map[y][x] === 0 || map[y][x] === 2;
    }

    function checkInteraction() {
      if (player.x === npc.x && player.y === npc.y - 1) {
        dialogueBox.style.display = 'block';
        dialogueBox.innerText = "Level 1: Check Pool Chemicals! ðŸ§ª Go to the control room and make sure chlorine and pH are within safe range.";
      }
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawMap();
      drawNPC();
      drawPlayer();
    }

    document.addEventListener('keydown', (e) => {
      let newX = player.x;
      let newY = player.y;

      if (e.key === 'ArrowUp') newY--;
      else if (e.key === 'ArrowDown') newY++;
      else if (e.key === 'ArrowLeft') newX--;
      else if (e.key === 'ArrowRight') newX++;

      if (canMove(newX, newY)) {
        player.x = newX;
        player.y = newY;
      }

      checkInteraction();
      gameLoop();
    });

    gameLoop();
  </script></body>
</html>
